# One-off pod to upload local model-repo4 (ResNet-50) into the PVC.
# 1. Apply PVC and this pod: kubectl apply -f serving/k8s/model-repo4/pvc.yaml -f serving/k8s/model-repo4/upload-pod.yaml
# 2. Wait for Running: kubectl wait --for=condition=Ready pod/upload-repo4-model --timeout=60s
# 3. Copy local files (from repo root): kubectl cp serving/model-repo4/. upload-repo4-model:/models/
# 4. Delete pod: kubectl delete pod upload-repo4-model
# 5. Deploy Triton: kubectl apply -f serving/k8s/model-repo4/triton-deployment.yaml
apiVersion: v1
kind: Pod
metadata:
  name: upload-repo4-model
  labels:
    app: triton-repo4
    component: upload
spec:
  restartPolicy: Never
  containers:
    - name: upload
      image: busybox:1.36
      command: ["sleep", "7200"]
      volumeMounts:
        - name: models
          mountPath: /models
  volumes:
    - name: models
      persistentVolumeClaim:
        claimName: triton-model-repo4
