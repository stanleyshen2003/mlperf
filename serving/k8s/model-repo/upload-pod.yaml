# One-off pod to upload local model repo into the PVC.
# 1. Apply: kubectl apply -f serving/k8s/model-repo/pvc.yaml -f serving/k8s/model-repo/upload-pod.yaml
# 2. Wait for Running: kubectl wait --for=condition=Ready pod/upload-yolo-model --timeout=60s
# 3. Copy local files (from repo root): kubectl cp serving/model-repo/. upload-yolo-model:/models/
# 4. Delete pod: kubectl delete pod upload-yolo-model
# 5. Deploy Triton: kubectl apply -f serving/k8s/model-repo/triton-deployment.yaml
apiVersion: v1
kind: Pod
metadata:
  name: upload-yolo-model
  labels:
    app: triton-yolo
    component: upload
spec:
  restartPolicy: Never
  containers:
    - name: upload
      image: busybox:1.36
      command: ["sleep", "7200"]
      volumeMounts:
        - name: models
          mountPath: /models
  volumes:
    - name: models
      persistentVolumeClaim:
        claimName: triton-model-repo
